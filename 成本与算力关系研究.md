# 成本与算力关系探索

以pmeer为例。

为了探究pmeer的挖矿成本与算力（矿机数）的关系，我们需要做一些定量假设：**假设市场用的都是同一型号的矿机，算力、功耗相同**。

- 假定市场所用矿机都是额定功率为 P，算力为 h 的矿机 A；
- 假定电费为 e 元/度；
- 假定网络一天的产币量是 R；
- 假定全网算力为 H，即全网算力相当于 n= H/h 台矿机 A。

其次，我们需要对包含矿机硬件成本和只计算电费成本做分类讨论。

## 电费成本与算力水平关系

全网一天的电费成本是 P * e * 24 * n = 24neP，而全网一天的产币量是 R, 那么平均到每个币的电费成本是：**C=24neP/R** 。

我们假定矿机A是一种8卡的GPU矿机，其额定功率大概在 P=1.35kw/h，而电费以 e=0.4元/度 为计，而 Qitmeer 测试网期间一天的产币量 R=374400，那么**成本 C 和算力水平（矿机数n）成线性正相关**。

由此可得：C =24neP/R=24×0.4×1.35n/R=12.96n/R

| 矿机数 n=H/h（台）| 成本 C =12.96n/R （元）|
|-----|-----|
|200 |0.00692|
|500 |0.01731|
|800 |0.02769|
|1000|0.03462|
|1500|0.05192|
|... |... |

得出电费成本与算力水平曲线关系趋势图：

![image](https://user-images.githubusercontent.com/32875657/66044050-44c02480-e553-11e9-9e63-78cb07bc7e4a.png)           
![image](https://user-images.githubusercontent.com/32875657/66044325-daf44a80-e553-11e9-9d74-a849c347e0f7.png)

此计算方式主要是以能耗功率为出发点的，假定了全网算力相当于n台功率在1.35kw/h的矿机。而实际情况是功率相当的矿机可能算力上有差异，一方面是显卡型号的不同，另一方面可能是卡数上的微小差异，但这只会影响个人成本，不会影响均值水平。

## 基于电费成本的、不同收益率下的盈利空间及回本周期

通过探索不同收益率f下、不同时间周期的盈利空间，可以探究基于电费成本的不同盈利率对矿机硬件回本周期的影响。

单台矿机在时间周期t日内的产币量：ΔN=tR*h/H=tR/n （h/H是矿机A获得竞争获胜概率）。

单台矿机在时间周期t日内、在收益率为f时的盈利额：ΔC=fC × ΔN = (24nePf/R) × (tR/n) = 24ePft = 24×0.4×1.35ft=12.96ft

（ps：以上盈利率是基于电费成本的盈利率）

由此可以看出，通过对比不同盈利率下的盈利额与矿机硬件成本，我们可以估算出相应的回本周期。

下表反映了不同盈利率下的回本周期：

|盈利率 f |盈利额 ΔC |硬件成本12000时的回本周期(天)|合（）月|
|--------|--------|-----------|-------------|
|20% |2.592t |4269.6 |142.32 |
|50% |6.48t  |1851.9 |61.73  |
|100%|12.96t |925.9  |30.86  |
|200%|25.92t |463    |15.43  |
|300%|38.88t |308.64 |10.29  |
|400%|51.84t |231.48 |7.72   |

![image](https://user-images.githubusercontent.com/32875657/66102098-bc3d9480-e5e3-11e9-9f8a-20317afb07b8.png)

注意文中所用的盈利率f是基于电费成本的纯盈利空间。比如盈利率为100%，那么利润线价格就是2倍的电费成本。

![image](https://user-images.githubusercontent.com/32875657/66103132-5a7f2980-e5e7-11e9-832d-5629c82b4dd7.png)


通过算力水平n、价格、盈利率三者的对应关系，可以来调控矿机A（本文以硬件价格12000举例）的回本周期。


## 包含矿机硬件的成本与算力水平关系

鉴于显卡矿机的特殊性，显卡矿机的显卡可以回收再利用，可以换回一部分成本。我们假定一台矿机A的硬件成本为12000元/台，此值应该相对接近。当然，由于显卡的可回收性，我们也可以把这一成本看作是矿机的泡沫成本。由于此成本是一次性支出成本，我们只能将其按不同时间周期平摊下去。姑且称其为**平摊周期**，也可以认为是**假定回本周期**。

- 假定平摊周期为3个月

  - 3个月的电费成本：24neP*90=2160neP
  - 总硬件成本：12000n
  - 3个月的总成本：12000n+2160neP
  - 3个月的总币量：90R

则每个币的平均成本：C= (12000n+2160neP)/90R = (12000+2160×0.4×1.35)n/90R=13166.4n/90R=146.293n/R

- 假定平摊周期为6个月

  - 6个月的电费成本：24neP*180=4320neP
  - 总硬件成本：12000n
  - 6个月的总成本：12000n+4320neP
  - 6个月的总币量：180R

则每个币的平均成本：C= (12000n+4320neP)/180R=79.627n/R

用这种固定平摊周期（回本周期）的方法，可以得到的如下的成本曲线：

![image](https://user-images.githubusercontent.com/32875657/66094541-eaf94200-e5c6-11e9-8aa6-e04578624cf4.png)     
![image](https://user-images.githubusercontent.com/32875657/66094645-54795080-e5c7-11e9-9542-5aa5a5f40c11.png)

对比上表和利润线，可以看出，若要保证6个月的回本周期（硬件成本12000时），市场价格需达到电费成本的6倍，即盈利率在500%。


## 维持不同状态的资金量需求

这个资金量需求受不同状态条件，以及时间周期约束。以下我们**以6个月的时间周期**进行探讨。

主要的状态条件：

- 时间周期：6个月
- 算力水平 n：n=500 和 n=1000
- 利润空间 f：假设最低状态 f=100% ；最高状态 f=500%

| 矿机数 n=H/h（台）| 成本 C =12.96n/R （元）|100%利润的价格 |500% 利润的价格 |
|-----|-----|--------|------------|
|500 |0.01731|0.03462 |0.10386|
|1000|0.03462|0.06923 |0.20769|

**6个月的总产币量：180R=67392000**

### n=500时

- 维持500台矿机的算力水平，利润空间在100%时所需的资金量：

  - 回收全部币量所需资金：67392000×0.03462=2333111 ，约233.3万元；
  - 回收80%币量所需资金: 67392000×0.03462×80%=1866489，约186.6万元；
  - 回收60%币量所需资金：67392000×0.03462×60%=1399867，约140万元。
  
- 维持500台矿机的算力水平，利润空间在500%时所需的资金量：

  - 回收全部币量所需资金：67392000×0.10386=6999333，约700万元；
  - 回收80%币量所需资金: 67392000×0.10386×80%=5599466，约560万元；
  - 回收60%币量所需资金：67392000×0.10386×60%=4199600，约420万元。
  
### n=1000时

- 维持1000台矿机的算力水平，利润空间在100%时所需的资金量：

  - 回收全部币量所需资金：67392000×0.06923=4665548 ，约466.6万元；
  - 回收80%币量所需资金: 67392000×0.06923×80%=3732439，约373.2万元；
  - 回收60%币量所需资金：67392000×0.06923×60%=2799329，约280万元。
  
- 维持1000台矿机的算力水平，利润空间在500%时所需的资金量：

  - 回收全部币量所需资金：67392000×0.20769=13996644 ，约1400万元；
  - 回收80%币量所需资金: 67392000×0.20769×80%=11197316，约1120万元；
  - 回收60%币量所需资金：67392000×0.20769×60%=8397987，约840万元。



## 总结

以上估算方法中有几个固定变量：

- 矿机硬件成本为12000元
- 电费单价是0.4元/度
- 矿机额定功率是1.35kw/h
- 日产币量R=374400

以上估算通过数学模型模拟了成本与算力的相关变化，通过分析算力水平n、价格（成本）、盈利率、回本周期之间的对应关系，对于市值管理有很大的指导作用。

         
### 固定变量值改变对结果的影响 

本文中用到的几个公式：

- 电费成本计算公式： C=24neP/R 
- 盈利额计算公式：：ΔC=fC × ΔN =12.96ft 
- 固定周期平摊硬件成本的单币成本（6个月）：C= (12000n+24neP*180)/180R     

由公式可以看出这里面可能发生变化的固定变量有：电费e，额定功率P，矿机成本12000。其中e、p对结果的影响是线性正相关，因此我们只需在**本文结果上乘以e、p的变化系数**，即可获得**新结果**。包含了硬件成本的情况（第三节）需代入相应系数另做计算，其单一变量的改变还达不到线性影响的级别。其次，硬件成本的增加无疑是会导致回本周期的增长，从第二节的探讨来看，这种变化的影响也几乎是成线性的，因此也可以直接乘以变化系数。

- 当只有功率变化时，例如矿机额定功率为2kw/h时，其变化系数为 P/1.35=2/1.35=1.48；

- 当只有电费变化时，例如电费为0.45元，其变化系数为 e/0.4=0.45/0.4=1.125

若这两者同时变化，则总和变化系数为 1.48×1.125=1.665。

那么此时，电费成本需在本文基础上乘以1.665，即 C=24neP/R=1.665 × 12.96n/R =21.5784n/R。

相应的资金需求量探讨中也同样乘以1.665即可，例如维持1000台矿机的算力水平，利润空间在500%时所需的资金量（回收80%币量，6个月）：1.665 × 67392000×0.20769×80%=18643530，约1864.4万元。




